<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="yandex-verification" content="a47c874dc2de855e" />
    <meta name='wmail-verification' content='036d59550baaddc2abb39fd16a1ab6b6' />
    <title>Plamber</title>
    <link rel="shortcut icon" href="{% static 'app/images/favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'app/css/general.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/index.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap-theme.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa&subset=cyrillic,cyrillic-ext,latin-ext">

    <script src="{% static 'app/js/third_party/jquery.js' %}"></script>
    <script src="{% static 'app/js/third_party/bootstrap.min.js' %}"></script>
    <script src="{% static 'app/js/helper/special.js' %}"></script>
    <script src="{% static 'app/js/index.js' %}"></script>

    {% if invalid_authentication %}
        <script>
            $(document).ready(function() {
                $("#log-in-sub-page").css("display", "block");
                $("#main").css("display", "none");
            });
        </script>
    {% endif %}

    <style>
        body {
            background: url({% static 'app/images/background.jpg' %}) no-repeat center center fixed;
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }
    </style>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-100423566-1', 'auto');
        ga('send', 'pageview');
    </script>
    <script src='https://www.google.com/recaptcha/api.js'></script>
</head>
<body>

    <!--Header Area-->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><img src="{% static 'app/images/logo_beta.jpg' %}"></a>
            </div>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="nav navbar-nav">
                    <li><a href="{% url 'about' %}">О проекте</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!--Main info area-->
    <div id="main" class="container container-margin footer-margin">
        <div class="row">
            <div class="col-sm-5 col-md-4 col-lg-4">
                <div class="intro">
                    <h2 class="header-color"><strong>Читайте книги онлайн!</strong></h2>
                    <h3 class="header-color header-font">
                        Получи уникальную возможность
                        всегда иметь доступ к своей любимой
                        литературе и книгам других пользователей
                        со всех типов устройств.<br>
                        Регистрируйся!
                    </h3>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-6 col-md-5 col-lg-5 margin">
                <button class="btn enter-button margin" onclick="logInPageShow()">Bойти</button>
                <button class="btn register-button margin" onclick="registerPageShow()">Зарегистрироваться</button>
            </div>
        </div>
    </div>

    <!--Login dialog area-->
    <div id="log-in-sub-page">
        <div class="container container-margin footer-margin">
            <div class="row">
                <div class="col-sm-6 col-md-5 col-lg-5">
                    <div class="margin-header header-color"><h2><strong>Bход</strong></h2></div>

                    <form action="/" method="POST">
                        {% csrf_token %}
                        <div>
                            <input class="input input-colors margin" placeholder="Имя пользователя"
                                   type="text" maxlength="30" pattern="^[a-zA-Z0-9_]{2,30}"
                                   name="username" oninvalid="usernameSignInMessage(this)" required>
                        </div>
                        <div>
                            <input class="input input-colors margin" placeholder="Пароль"
                                   type="password" maxlength="16" name="passw" required>
                        </div>
                        <div class="margin" align="right">
                            {% if invalid_authentication %}
                                <div class="error-msg error-text"><strong>Логин или пароль введен не верно!</strong></div>
                            {% endif %}
                            <a href="#" class="auth-msg reference" onclick="forgotPageShow()">Забыли пароль?</a>
                            <button class="btn enter-button margin" onclick="logInPageHide()">Назад</button>
                            <button type="submit" class="btn register-button margin">Bойти</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--Registration dialog area-->
    <div id="register-sub-page">
        <div class="container container-margin footer-margin">
            <div class="row">
                <div class="col-sm-6 col-md-5 col-lg-5">
                    <div class="margin-header header-color"><h2><strong>Регистрация</strong></h2></div>
                    <form action="{% url 'sign_in' %}" method="POST" onsubmit="isSignInAvailable(this); return false;">
                        {% csrf_token %}
                        <div>
                            <input id="username-input" class="input input-colors margin" name="username"
                                   placeholder="Имя пользователя" pattern="^[a-zA-Z0-9_]{2,30}" type="text"
                                   oninvalid="usernameSignInMessage(this)" oninput="checkUserNotExists()" required>
                        </div>
                        <div id="user-exists" class="error-msg error-text">
                            <strong>Пользователь с таким именем уже существует.</strong>
                        </div>
                        <div>
                            <input id="mail-input" class="input input-colors margin" placeholder="Email"
                                   type="email" name="email" oninput="checkMailNotExists()" required>
                        </div>
                        <div id="mail-exists" class="error-msg error-text">
                            <strong>Пользователь с таким email уже существует.</strong>
                        </div>
                        <div>
                            <input class="input input-colors margin" id="first-pass" placeholder="Пароль"
                                   type="password" pattern="^[a-zA-Z0-9_]{6,16}" oninvalid="passwordSignInMessage(this)"
                                   name="passw1" oninput="checkEqualPassLines()" required>
                        </div>
                        <div>
                            <input class="input input-colors margin" id="second-pass" name="passw2"
                                   placeholder="Повторите Пароль" type="password" pattern="^[a-zA-Z0-9_]{6,16}"
                                   oninvalid="passwordSignInMessage(this)" oninput="checkEqualPassLines()" required>
                        </div>
                        <div id="pass-wrong-message" class="error-msg error-text">
                            <strong>Пароли должны быть одинаковые!</strong>
                        </div>
                        <div class="g-recaptcha margin" data-theme="dark" data-sitekey="6LeCtCYUAAAAAD8qN1gzekUWv28mtfyNdJtnjES-"></div>
                        <div id="no-captcha" class="error-msg error-text">Вы должны доказать что вы не робот!</div>
                        <div class="margin" align="right">
                            <button class="btn enter-button margin" onclick="registerPageHide()">Назад</button>
                            <button type="submit" class="btn register-button margin"
                                    onclick="yaCounter44888053.reachGoal('connect');ga('send', 'event', 'Button_connect', 'click_connect'); return true;">Присоединиться</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!--Forgot password dialog area-->
    <div id="forgot-sub-page">
        <div class="container container-margin footer-margin">
            <div class="row">
                <div class="col-sm-6 col-md-5 col-lg-5">
                    <div class="margin-header header-color"><h2><strong>Восстановление пароля</strong></h2></div>
                    <p class="header-color header-font">Забыли пароль? Введите ваш Email
                        адрес и мы отправим вам письмо для восстановления данных.</p>
                    <div>
                        <input class="input input-colors margin" id="forgot-input" name="email"
                               placeholder="Ваш Email" type="email">
                    </div>
                    <div id="forgot-status" class="header-color header-font margin"></div>
                    <div class="margin" align="right">
                        <button class="btn enter-button margin" onclick="forgotPageHide()">Назад</button>
                        <button class="btn register-button margin" onclick="sendMail()">Отправить</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter44888053 = new Ya.Metrika({
                        id:44888053,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/44888053" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</body>
</html>