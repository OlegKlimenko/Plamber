<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{{ category.category_name }}</title>
    <link rel="shortcut icon" href="{% static 'app/images/favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'app/css/general.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/selected_category.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap-theme.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa&subset=cyrillic,cyrillic-ext,latin-ext">

    <script src="{% static 'app/js/third_party/jquery.js' %}"></script>
    <script src="{% static 'app/js/third_party/bootstrap.min.js' %}"></script>
    <script src="{% static 'app/js/helper/special.js' %}"></script>
    <script src="{% static 'app/js/selected_category.js' %}"></script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-‎100423566-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>
    <!--Header Area-->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><img src="{% static 'app/images/logo_beta.jpg' %}"></a>
            </div>

            <form id="logout" action="{% url 'logout' %}" method="POST">
                {% csrf_token %}
            </form>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="nav navbar-nav">
                    <li><a href="{% url 'categories' %}">Библиотека</a></li>
                    <li><a href="{% url 'index' %}">Мои книги</a></li>
                    <li><a href="{% url 'profile' request.user.id %}">Профиль</a></li>
                    <li><a href="{% url 'about' %}">О проекте</a></li>
                    <li><a href="javascript:;" onclick="logout()">Выйти</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!--Main info Area-->
    <div id="main" class="container container-margin footer-margin">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-12">

                <!--Header part of main area-->
                <h3 class="header-color"><b>{{ category.category_name }}</b></h3>
                {% if books %}
                    <input id="search-input" class="input input-colors" placeholder="Поиск..."
                           oninput="searchBooks({{ category.id }});" maxlength="255">

                    <!--Sort part of main area-->
                    <div class="sort-area" align="left">
                        <span id="sort-header">Фильтровать по</span>
                        <div class="sort-buttons">
                            <button class="btn selected-button-color margin"
                                    onclick="sort({{ category_number }}, 'book_name'); changeBtnColor(this);">Алфавиту</button>
                            <button class="btn button-color margin"
                                    onclick="sort({{ category_number }}, 'author'); changeBtnColor(this);">Автору</button>
                            <button class="btn button-color margin"
                                    onclick="sort({{ category_number }}, 'estimation'); changeBtnColor(this);">Оценкам</button>
                            <button class="btn button-color margin"
                                    onclick="sort({{ category_number }}, 'most_readable'); changeBtnColor(this);">Самым читаемым</button>
                        </div>
                    </div>
                {% endif %}

                <img id="loading" src="{% static 'app/images/loading.gif' %}">

                <!--Area with books list-->
                <div class="col-sm-16 col-md-16 col-lg-16 books-area">

                    {% if books %}
                        {% for book in books %}
                            <a href="{% url 'book' book.id %}">
                                <div class="col-sm-3 col-md-3 col-lg-2 col-xs-6">
                                    <div class="thumbnail">
                                        <div class="img-wrapper">
                                            <img src="{% if book.photo %}{{ book.photo.url }}{% endif %}">
                                            <div class="book-info word-wrap">
                                                <b>{{ book.book_name }}</b><br>
                                                <i>{{ book.id_author }}</i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </a>
                        {% endfor %}
                    {% else %}
                        <h3 class="paragraph">В этой категории пока нет книг =((</h3>
                        <h3 class="paragraph">
                            <i>Что бы добавить, нажмите здесь:</i>
                            <a href="{% url 'add_book' %}" class="active-reference">Добавить книгу</a></h3>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter44888053 = new Ya.Metrika({
                        id:44888053,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/44888053" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</body>
</html>
