<!DOCTYPE html>
{% load staticfiles %}
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Добавить книгу</title>
    <link rel="shortcut icon" href="{% static 'app/images/favicon.ico' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'app/css/general.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/add_book.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'app/css/third_party/bootstrap-theme.css' %}">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Comfortaa&subset=cyrillic,cyrillic-ext,latin-ext">

    <script src="{% static 'app/js/third_party/jquery.js' %}"></script>
    <script src="{% static 'app/js/third_party/bootstrap.min.js' %}"></script>
    <script src="{% static 'app/js/helper/special.js' %}"></script>
    <script src="{% static 'app/js/add_book.js' %}"></script>

    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-100423566-1', 'auto');
        ga('send', 'pageview');
    </script>
</head>
<body>
    <!--Header Area-->
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbarCollapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="/"><img src="{% static 'app/images/logo_beta.jpg' %}"></a>
            </div>

            <form id="logout" action="{% url 'logout' %}" method="POST">
                {% csrf_token %}
            </form>

            <div class="collapse navbar-collapse" id="navbarCollapse">
                <ul class="nav navbar-nav">
                    <li><a href="{% url 'categories' %}">Библиотека</a></li>
                    <li><a href="{% url 'index' %}">Мои книги</a></li>
                    <li><a href="{% url 'profile' request.user.id %}">Профиль</a></li>
                    <li><a href="{% url 'about' %}">О проекте</a></li>
                    <li><a href="javascript:;" onclick="logout()">Выйти</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <!--Main info area-->
    <div id="main" class="container container-margin footer-margin">
        <div class="row">
            <div class="col-sm-8 col-md-6 col-lg-6">
                <h2 class="header-color"><b>Добавить книгу</b></h2>

                <form action="{% url 'book_successful' %}" method="POST" onsubmit="isBookChosen(this); return false;"
                      enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="margin">
                        <input class="input input-colors" placeholder="Название книги" maxlength="150"
                               name="bookname" required>
                    </div>
                    <div class="margin">
                        <input id="author-input" class="input input-colors" placeholder="Автор"
                               maxlength="100" name="author" oninput="generateAuthors()" required>
                    </div>
                    <div id="div-authors-list-header" align="left"><h4>Bы можете выбрать автора из списка:</h4></div>
                    <div id="div-authors-list" class="margin word-wrap"></div>
                    <div class="input-header margin" align="right">
                        Категория
                        <select class="select-box input input-colors" name="category" required>
                            {% for category in categories %}
                            <option class="check-element" value="{{ category }}">{{ category }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-header margin" align="right">
                        Язык книги
                        <select class="select-box input input-colors" name="language" required>
                            {% for language in languages %}
                            <option class="check-element" value="{{ language }}">{{ language }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <textarea id="about-book" class="input input-colors about-padding" placeholder="О книге"
                                  name="about" required maxlength="1000"></textarea>
                    </div>
                    <div class="margin" align="left">
                        <label id="upload-button-label" class="btn upload-button">
                            <span id="upload-caption">Загрузить книгу</span>
                            <input id="upload-book" type="file" accept="application/pdf" name="bookfile">
                        </label>
                        <p id="missing-book-warn" class="error-text"><b>Bыберите книгу!</b></p>
                        <div id="file-uploading" align="center">
                            <p>Подождите пожалуйста, файл загружается на сервер...</p>
                            <p><img src="{% static 'app/images/loading.gif' %}"></p>
                        </div>
                    </div>
                    {% if error %}
                        <div id="invalid-book"
                             class="error-text">Вы выбрали неправильный формат файла. Поддерживается только PDF.</div>
                    {% endif %}
                    <div class="margin" align="right">
                        <button class="btn add-book-button" type="submit"
                                onclick="yaCounter44888053.reachGoal('add_book');ga('send', 'event', 'button_add_book', 'click_add_book'); return true;">Добавить книгу</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript">
        (function (d, w, c) {
            (w[c] = w[c] || []).push(function() {
                try {
                    w.yaCounter44888053 = new Ya.Metrika({
                        id:44888053,
                        clickmap:true,
                        trackLinks:true,
                        accurateTrackBounce:true,
                        webvisor:true
                    });
                } catch(e) { }
            });

            var n = d.getElementsByTagName("script")[0],
                s = d.createElement("script"),
                f = function () { n.parentNode.insertBefore(s, n); };
            s.type = "text/javascript";
            s.async = true;
            s.src = "https://mc.yandex.ru/metrika/watch.js";

            if (w.opera == "[object Opera]") {
                d.addEventListener("DOMContentLoaded", f, false);
            } else { f(); }
        })(document, window, "yandex_metrika_callbacks");
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/44888053" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->
</body>
</html>